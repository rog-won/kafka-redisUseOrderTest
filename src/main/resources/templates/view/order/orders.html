<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>주문 목록</title>
</head>
<body>
<div th:insert="fragment/fragments :: nav"></div>
<h1>주문 목록</h1>
<table border="1">
    <thead>
    <tr>
        <th>주문 ID</th>
        <th>제품 ID</th>
        <th>수량</th>
        <th>상태</th>
        <th>액션</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
        <td th:text="${order.orderId}">주문 ID</td>
        <td th:text="${order.product.productId}">제품 ID</td>
        <td th:text="${order.quantity}">수량</td>
        <td th:text="${order.status}">상태</td>
        <td>
            <!-- 주문 상태가 CREATED인 경우에만 액션 버튼 보여줌 -->
            <span th:if="${order.status == 'CREATED'}">
                    <form th:action="@{/orders/accept}" method="post" style="display:inline;">
                        <input type="hidden" name="orderId" th:value="${order.orderId}" />
                        <!-- 필요하면 창고 ID 입력을 위한 추가 필드를 넣을 수 있음 -->
                        <button type="submit">수락</button>
                    </form>
                    <form th:action="@{/orders/cancel}" method="post" style="display:inline; margin-left: 5px;">
                        <input type="hidden" name="orderId" th:value="${order.orderId}" />
                        <button type="submit">취소</button>
                    </form>
                </span>
            <!-- 상태가 ACCEPTED이면 수락완료로 표시 -->
            <span th:if="${order.status == 'ACCEPTED'}">수락완료</span>
            <!-- 상태가 CANCELED이면 취소됨으로 표시 -->
            <span th:if="${order.status == 'CANCELED'}">취소됨</span>
        </td>
    </tr>
    </tbody>
</table>
<br>
<a th:href="@{/orders/new}">새 주문 생성</a>
</body>
</html>